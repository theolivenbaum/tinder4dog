customElements.define('tinder4dog-carousel',class extends HTMLElement{constructor(){super();const a=new MutationObserver(this.updateChildren.bind(this));a.observe(this,{childList:!0}),this.selected=0,this._startDrag=this._startDrag.bind(this),this._stopDrag=this._stopDrag.bind(this),this._drag=this._drag.bind(this),this._dragging=!1}connectedCallback(){this.updateChildren(),this.addEventListener('mousedown',this._startDrag),this.addEventListener('touchstart',this._startDrag),document.addEventListener('mousemove',this._drag),document.addEventListener('touchmove',this._drag),document.addEventListener('mouseup',this._stopDrag),document.addEventListener('touchend',this._stopDrag)}_startDrag(a){this._dragging=!0,this._startX=a.clientX||a.touches[0].clientX,a.preventDefault(),a.stopPropagation()}_drag(a){if(this._dragging){let b=(a.clientX||a.touches[0].clientX)-this._startX;this._width*(this._images.length-this.selected);0===this.selected&&0<b&&(b=0),this.selected===this._images.length-1&&0>b&&(b=0),this._images.forEach(d=>d.style.transform=`translateX(${b}px)`),a.preventDefault(),a.stopPropagation()}}_stopDrag(a){if(this._dragging){this._dragging=!1;let b=(a.clientX||a.changedTouches[0].clientX)-this._startX;if(10>Math.abs(b))return this.dispatchEvent(new CustomEvent('dismiss',{detail:{selected:this.selected},bubbles:!0}));0===this.selected&&0<b&&(b=0),this.selected===this._images.length-1&&0>b&&(b=0);let c=0;b>this._width/4&&(c=1),b<-this._width/4&&(c=-1),this.selected-=c;const d=this._images[0].getBoundingClientRect();this.updateChildren();const e=this._images[0].getBoundingClientRect();this._images.forEach(f=>f.style.transform=`translateX(${d.left-e.left}px)`),requestAnimationFramePromise().then(()=>requestAnimationFramePromise()).then(()=>{this._images.forEach(g=>{g.style.transition='transform 0.1s ease-in-out'})}).then(()=>requestAnimationFramePromise()).then(()=>requestAnimationFramePromise()).then(()=>{return this._images.forEach(g=>g.style.transform=''),transitionEndPromise(this)}).then(()=>this._images.forEach(g=>g.style.transition='')),a.preventDefault(),a.stopPropagation()}}updateChildren(){if(this._images=this.querySelectorAll('.carousel__item'),!(0>=this._images.length)){for(let c=0;c<this._images.length;c++)this._images[c].style.left=`${100*(c-this.selected)}%`,this._images[c].style.transform='';const a=this._images[this._images.length-1],b=a.getBoundingClientRect();this._width=b.width}}});